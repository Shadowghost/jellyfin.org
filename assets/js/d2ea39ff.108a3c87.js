(self.webpackChunkjellyfin_org=self.webpackChunkjellyfin_org||[]).push([[8155],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return y}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=u(e,["components","mdxType","originalType","parentName"]),d=s(n),y=o,f=d["".concat(l,".").concat(y)]||d[y]||c[y]||i;return n?r.createElement(f,a(a({ref:t},p),{},{components:n})):r.createElement(f,a({ref:t},p))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u.mdxType="string"==typeof e?e:o,a[1]=u;for(var s=2;s<i;s++)a[s]=n[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4731:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return a},contentTitle:function(){return u},metadata:function(){return l},toc:function(){return s},default:function(){return c}});var r=n(2122),o=n(9756),i=(n(7294),n(3905)),a={title:"Please refresh your Jellyfin Apt key on Debian/Ubuntu",author:"Joshua Boniface",author_url:"https://github.com/joshuaboniface",author_image_url:"https://avatars.githubusercontent.com/u/4031396?v=4",tags:["packaging"],description:"Our old key is expiring December 15th, read on to find out how to update"},u=void 0,l={permalink:"/blog/2020/11/24/apt-key",source:"@site/blog/2020-11-24-apt-key.md",title:"Please refresh your Jellyfin Apt key on Debian/Ubuntu",description:"Our old key is expiring December 15th, read on to find out how to update",date:"2020-11-24T00:00:00.000Z",formattedDate:"November 24, 2020",tags:[{label:"packaging",permalink:"/blog/tags/packaging"}],readingTime:1.99,truncated:!0,prevItem:{title:"Android app now on F-Droid",permalink:"/blog/2021/03/01/android-on-fdroid"},nextItem:{title:"Android v2.1.0 - Jellyfin in your car!",permalink:"/blog/2020/10/25/android-v2.1.0"}},s=[],p={toc:s};function c(e){var t=e.components,n=(0,o.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Our GPG key for signing our Debian and Ubuntu repositories (",(0,i.kt)("inlineCode",{parentName:"p"},"https://repo.jellyfin.org/debian")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"https://repo.jellyfin.org/ubuntu"),") is set to expire next month."),(0,i.kt)("p",null,"Unfortunately this was an oversight when we first set up this repo, and we never provided any convenient way to update this. As a remedy, we've removed the expiry on the key and put a new version on the repo. This brings us into line with numerous other 3rd-party Debian repositories, such as the Microsoft .NET and Docker repositories which also use an expiry-less key, and should avoid any such issues again, barring a need to rotate it. This does however require manually refreshing the key on your system. "),(0,i.kt)("p",null,"Doing this is as easy as re-running the command from the install docs; it will overwrite the old key with the new one:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"wget -O- https://repo.jellyfin.org/jellyfin_team.gpg.key | sudo apt-key add -\n")),(0,i.kt)("p",null,"You can verify this worked by checking the ",(0,i.kt)("inlineCode",{parentName:"p"},"apt-key")," output like so; this is a good practice anyways to verify that the key has not been altered, as its signatures and fingerprint should all match:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ apt-key list | grep -C2 jellyfin  # Notice the expires: field\nWarning: apt-key output should not be parsed (stdout is not a terminal)\npub   rsa3072 2018-12-16 [SC] [expires: 2020-12-15]\n      4918 AABC 486C A052 358D  778D 4902 3CD0 1DE2 1A7B\nuid           [ unknown] Jellyfin Team <team@jellyfin.org>\nsub   rsa3072 2018-12-16 [E] [expires: 2020-12-15]\n\n$ wget -O- https://repo.jellyfin.org/jellyfin_team.gpg.key | sudo apt-key add -\n[...]\n\n$ apt-key list | grep -C2 jellyfin  # Notice the expires: is now gone\nWarning: apt-key output should not be parsed (stdout is not a terminal)\npub   rsa3072 2018-12-16 [SC]\n      4918 AABC 486C A052 358D  778D 4902 3CD0 1DE2 1A7B\nuid           [ unknown] Jellyfin Team <team@jellyfin.org>\nsub   rsa3072 2018-12-16 [E]\n")),(0,i.kt)("p",null,"If you find this didn't work, try removing the key first with this command, then re-add it again:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"sudo apt-key remove 1DE21A7B\n")),(0,i.kt)("p",null,"We've also published the key to the Ubuntu keyserver as a backup, just in case, or if you prefer this method. Our docs will retain the direct-file method however. You can use this command to obtain the key directly from the Ubuntu keyserver:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 1DE21A7B\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Please ensure you refresh the key before December 15th, or you will find that ",(0,i.kt)("inlineCode",{parentName:"strong"},"apt update")," no longer works!")),(0,i.kt)("p",null,"GitHub Issue for reference: ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/jellyfin/jellyfin/issues/4528"},"https://github.com/jellyfin/jellyfin/issues/4528")),(0,i.kt)("p",null,"Reddit thread for reference: ",(0,i.kt)("a",{parentName:"p",href:"https://www.reddit.com/r/jellyfin/comments/jz6u9o/debian_ubuntu_repo_users_our_key_is_expiring/"},"https://www.reddit.com/r/jellyfin/comments/jz6u9o/debian_ubuntu_repo_users_our_key_is_expiring/")),(0,i.kt)("p",null,"Thanks,\nJoshua"))}c.isMDXComponent=!0}}]);