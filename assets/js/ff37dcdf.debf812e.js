"use strict";(self.webpackChunkjellyfin_org=self.webpackChunkjellyfin_org||[]).push([[3574],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return y}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(n),y=o,f=d["".concat(u,".").concat(y)]||d[y]||c[y]||a;return n?r.createElement(f,i(i({ref:t},p),{},{components:n})):r.createElement(f,i({ref:t},p))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6101:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return u},default:function(){return y},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return c}});var r=n(3117),o=n(102),a=(n(7294),n(3905)),i=["components"],s={title:"Please refresh your Jellyfin Apt key on Debian/Ubuntu",description:"Our old key is expiring December 15th, read on to find out how to update",authors:"joshuaboniface",date:new Date("2020-11-24T00:00:00.000Z"),slug:"jellyfin-apt-key"},u=void 0,l={permalink:"/posts/jellyfin-apt-key",source:"@site/blog/2020/11-24-jellyfin-apt-key.md",title:"Please refresh your Jellyfin Apt key on Debian/Ubuntu",description:"Our old key is expiring December 15th, read on to find out how to update",date:"2020-11-24T00:00:00.000Z",formattedDate:"November 24, 2020",tags:[],readingTime:1.99,hasTruncateMarker:!0,authors:[{name:"Joshua Boniface",url:"https://github.com/joshuaboniface",imageURL:"https://avatars.githubusercontent.com/u/4031396?v=4",key:"joshuaboniface"}],frontMatter:{title:"Please refresh your Jellyfin Apt key on Debian/Ubuntu",description:"Our old key is expiring December 15th, read on to find out how to update",authors:"joshuaboniface",date:"2020-11-24T00:00:00.000Z",slug:"jellyfin-apt-key"},prevItem:{title:"Android app now on F-Droid",permalink:"/posts/android-on-fdroid"},nextItem:{title:"Android v2.1.0 - Jellyfin in your car!",permalink:"/posts/android-v2.1.0"}},p={authorsImageUrls:[void 0]},c=[],d={toc:c};function y(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Our GPG key for signing our Debian and Ubuntu repositories (",(0,a.kt)("inlineCode",{parentName:"p"},"https://repo.jellyfin.org/debian")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"https://repo.jellyfin.org/ubuntu"),") is set to expire next month."),(0,a.kt)("p",null,"Unfortunately this was an oversight when we first set up this repo, and we never provided any convenient way to update this. As a remedy, we've removed the expiry on the key and put a new version on the repo. This brings us into line with numerous other 3rd-party Debian repositories, such as the Microsoft .NET and Docker repositories which also use an expiry-less key, and should avoid any such issues again, barring a need to rotate it. This does however require manually refreshing the key on your system."),(0,a.kt)("p",null,"Doing this is as easy as re-running the command from the install docs; it will overwrite the old key with the new one:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"wget -O- https://repo.jellyfin.org/jellyfin_team.gpg.key | sudo apt-key add -\n")),(0,a.kt)("p",null,"You can verify this worked by checking the ",(0,a.kt)("inlineCode",{parentName:"p"},"apt-key")," output like so; this is a good practice anyways to verify that the key has not been altered, as its signatures and fingerprint should all match:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"$ apt-key list | grep -C2 jellyfin  # Notice the expires: field\nWarning: apt-key output should not be parsed (stdout is not a terminal)\npub   rsa3072 2018-12-16 [SC] [expires: 2020-12-15]\n      4918 AABC 486C A052 358D  778D 4902 3CD0 1DE2 1A7B\nuid           [ unknown] Jellyfin Team <team@jellyfin.org>\nsub   rsa3072 2018-12-16 [E] [expires: 2020-12-15]\n\n$ wget -O- https://repo.jellyfin.org/jellyfin_team.gpg.key | sudo apt-key add -\n[...]\n\n$ apt-key list | grep -C2 jellyfin  # Notice the expires: is now gone\nWarning: apt-key output should not be parsed (stdout is not a terminal)\npub   rsa3072 2018-12-16 [SC]\n      4918 AABC 486C A052 358D  778D 4902 3CD0 1DE2 1A7B\nuid           [ unknown] Jellyfin Team <team@jellyfin.org>\nsub   rsa3072 2018-12-16 [E]\n")),(0,a.kt)("p",null,"If you find this didn't work, try removing the key first with this command, then re-add it again:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"sudo apt-key remove 1DE21A7B\n")),(0,a.kt)("p",null,"We've also published the key to the Ubuntu keyserver as a backup, just in case, or if you prefer this method. Our docs will retain the direct-file method however. You can use this command to obtain the key directly from the Ubuntu keyserver:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 1DE21A7B\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Please ensure you refresh the key before December 15th, or you will find that ",(0,a.kt)("inlineCode",{parentName:"strong"},"apt update")," no longer works!")),(0,a.kt)("p",null,"GitHub Issue for reference: ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/jellyfin/jellyfin/issues/4528"},"https://github.com/jellyfin/jellyfin/issues/4528")),(0,a.kt)("p",null,"Reddit thread for reference: ",(0,a.kt)("a",{parentName:"p",href:"https://www.reddit.com/r/jellyfin/comments/jz6u9o/debian_ubuntu_repo_users_our_key_is_expiring/"},"https://www.reddit.com/r/jellyfin/comments/jz6u9o/debian_ubuntu_repo_users_our_key_is_expiring/")),(0,a.kt)("p",null,"Thanks,\nJoshua"))}y.isMDXComponent=!0}}]);