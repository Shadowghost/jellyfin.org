(self.webpackChunkjellyfin_org=self.webpackChunkjellyfin_org||[]).push([[1318],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||a;return n?r.createElement(h,o(o({ref:t},c),{},{components:n})):r.createElement(h,o({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8849:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return p},default:function(){return d}});var r=n(2122),i=n(9756),a=(n(7294),n(3905)),o={id:"networking",title:"Networking"},l="Networking",s={unversionedId:"configuration/networking",id:"configuration/networking",isDocsHomePage:!1,title:"Networking",description:"This section describes how to get basic connectivity to a Jellyfin server, and also some more advanced networking scenarios.",source:"@site/docs/configuration/networking.md",sourceDirName:"configuration",slug:"/configuration/networking",permalink:"/docs/configuration/networking",editUrl:"https://github.com/jellyfin/jellyfin.org/edit/master/docs/configuration/networking.md",version:"current",frontMatter:{id:"networking",title:"Networking"},sidebar:"tutorialSidebar",previous:{title:"Hardware Acceleration",permalink:"/docs/configuration/admin-hardware-acceleration"},next:{title:"Troubleshooting",permalink:"/docs/configuration/admin-troubleshoot"}},p=[{value:"Connectivity",id:"connectivity",children:[{value:"Port Bindings",id:"port-bindings",children:[]},{value:"Monitoring Endpoints",id:"monitoring-endpoints",children:[]}]},{value:"Self-Signed Certificate",id:"self-signed-certificate",children:[]},{value:"Running Jellyfin Behind a Reverse Proxy",id:"running-jellyfin-behind-a-reverse-proxy",children:[{value:"Known Proxies",id:"known-proxies",children:[]},{value:"Base URL",id:"base-url",children:[]},{value:"Final Steps",id:"final-steps",children:[]}]}],c={toc:p};function d(e){var t=e.components,n=(0,i.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"networking"},"Networking"),(0,a.kt)("p",null,"This section describes how to get basic connectivity to a Jellyfin server, and also some more advanced networking scenarios."),(0,a.kt)("h2",{id:"connectivity"},"Connectivity"),(0,a.kt)("p",null,"Many clients will automatically discover servers running on the same LAN and display them on login. If you are outside the network when you connect you can type in the complete IP address or domain name in the server field with the correct port to continue to the login page. You can find the default ports below to access the web frontend."),(0,a.kt)("p",null,"HTTP and HTTPS are the primary means of connecting to the server. If using a self-signed certificate for HTTPS, some clients may not work such as Chromecast or Roku."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"[!WARNING]","\nIn order for Chromecast to work on a non-public routable connection, 8.8.8.8 must be blocked on the Chromecast's Gateway. Blocking 8.8.8.8 on your router is the easiest solution to this problem.")),(0,a.kt)("h3",{id:"port-bindings"},"Port Bindings"),(0,a.kt)("p",null,"This document aims to provide an administrator with knowledge on what ports Jellyfin binds to and what purpose they serve."),(0,a.kt)("h4",{id:"static-ports"},"Static Ports"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"8096/tcp is used by default for HTTP traffic. You can change this in the dashboard."),(0,a.kt)("li",{parentName:"ul"},"8920/tcp is used by default for HTTPS traffic. You can change this in the dashboard."),(0,a.kt)("li",{parentName:"ul"},"1900/udp is used for service auto-discovery. This is not configurable."),(0,a.kt)("li",{parentName:"ul"},"7359/udp is also used for auto-discovery. This is not configurable.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"HTTP Traffic:")," 8096"),(0,a.kt)("p",null,"The web frontend can be accessed here for debugging SSL certificate issues on your local network. You can modify this setting from the ",(0,a.kt)("strong",{parentName:"p"},"Networking")," page in the settings."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"HTTPS Traffic:")," 8920"),(0,a.kt)("p",null,"This setting can also be modified from the ",(0,a.kt)("strong",{parentName:"p"},"Networking")," page to use a different port."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Service Discovery:")," 1900"),(0,a.kt)("p",null,"Since client auto-discover would break if this option were configurable, you cannot change this in the settings at this time. DLNA also uses this port and is required to be in the local subnet."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Client Discovery:")," 7359 UDP"),(0,a.kt)("p",null,"Allows clients to discover Jellyfin on the local network. A broadcast message to this port with ",(0,a.kt)("inlineCode",{parentName:"p"},"Who is JellyfinServer?")," will get a JSON response that includes the server address, ID, and name."),(0,a.kt)("h4",{id:"dynamic-ports"},"Dynamic Ports"),(0,a.kt)("p",null,"Live TV devices will often use a random UDP port for HDHomeRun devices. The server will select an unused port on startup to connect to these tuner devices."),(0,a.kt)("h3",{id:"monitoring-endpoints"},"Monitoring Endpoints"),(0,a.kt)("p",null,"See @monitoring for details on the monitoring endpoints that Jellyfin provides."),(0,a.kt)("h2",{id:"self-signed-certificate"},"Self-Signed Certificate"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.sslshopper.com/article-most-common-openssl-commands.html"},"See here for more information.")),(0,a.kt)("p",null,"Create a private key."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"openssl req -x509 -newkey rsa:4096 -keyout ./privkey.pem -out cert.pem -days 365 -nodes -subj '/CN=jellyfin.lan'\n")),(0,a.kt)("p",null,"Omit ",(0,a.kt)("inlineCode",{parentName:"p"},"-nodes")," to set a password interactively."),(0,a.kt)("p",null,"Remove ",(0,a.kt)("inlineCode",{parentName:"p"},"-days 365")," to make it 'permanent'."),(0,a.kt)("p",null,"Add ",(0,a.kt)("inlineCode",{parentName:"p"},"-subj '/CN=localhost'")," to make it not ask interactive questions about content of certificate."),(0,a.kt)("p",null,"The above command creates ",(0,a.kt)("inlineCode",{parentName:"p"},"./privkey.pem")," which will require one more step before use in Jellyfin."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"openssl pkcs12 -export -out jellyfin.pfx -inkey privkey.pem -in /usr/local/etc/letsencrypt/live/domain.org/cert.pem -passout pass:\n")),(0,a.kt)("h2",{id:"running-jellyfin-behind-a-reverse-proxy"},"Running Jellyfin Behind a Reverse Proxy"),(0,a.kt)("p",null,"It's possible to run Jellyfin behind another server acting as a reverse proxy.  With a reverse proxy setup, this server handles all network traffic and proxies it back to Jellyfin. This provides the benefits of using DNS names and not having to remember port numbers, as well as easier integration and management of SSL certificates."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"[!WARNING]","\nIn order for a reverse proxy to have the maximum benefit, you should have a publically routable IP address and a domain with DNS set up correctly.\nThese examples assume you want to run Jellyfin under a sub-domain (e.g. jellyfin.example.com), but are easily adapted for the root domain if desired.")),(0,a.kt)("p",null,"Some popular options for reverse proxy systems are ",(0,a.kt)("a",{parentName:"p",href:"https://httpd.apache.org"},"Apache"),", ",(0,a.kt)("a",{parentName:"p",href:"https://caddyserver.com"},"Caddy"),", ",(0,a.kt)("a",{parentName:"p",href:"https://www.haproxy.com"},"Haproxy"),", ",(0,a.kt)("a",{parentName:"p",href:"https://www.nginx.com"},"Nginx")," and ",(0,a.kt)("a",{parentName:"p",href:"https://traefik.io"},"Traefik"),"."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"xref:network-reverse-proxy-apache"},"Apache")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"xref:network-reverse-proxy-caddy"},"Caddy")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"xref:network-reverse-proxy-haproxy"},"HAProxy")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"xref:network-reverse-proxy-nginx"},"Nginx")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"xref:network-reverse-proxy-traefik"},"Traefik"))),(0,a.kt)("p",null,"While not a reverse proxy, Let's Encrypt can be used independently or with a reverse proxy to provide SSL certificates."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"xref:network-letsencrypt"},"Let's Encrypt"))),(0,a.kt)("p",null,"When following this guide, be sure to replace the following variables with your information."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"DOMAIN_NAME"),": Your public domain name to access Jellyfin on (e.g. jellyfin.example.com)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"example.com"),": The domain name Jellyfin services will run under (e.g. example.com)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"SERVER_IP_ADDRESS"),": The IP address of your Jellyfin server (if the reverse proxy is on the same server use 127.0.0.1)")),(0,a.kt)("p",null,"In addition, the examples are configured for use with Let's Encrypt certificates. If you have a certificate from another source, change the SSL configuration from ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/letsencrypt/DOMAIN_NAME/")," to the location of your certificate and key."),(0,a.kt)("p",null,"Ports 80 and 443 (pointing to the proxy server) need to be opened on your router and firewall."),(0,a.kt)("h3",{id:"known-proxies"},"Known Proxies"),(0,a.kt)("p",null,"Add the IP address/hostname of your reverse proxy to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Known Proxies")," (under Admin Dashboard -> Networking).  This is a comma separated list of IP addresses/hostnames of known proxies used when connecting to your Jellyfin instance and is required to make proper use of X-Forwarded-For headers. Requires a server restart after saving."),(0,a.kt)("h3",{id:"base-url"},"Base URL"),(0,a.kt)("p",null,"Running Jellyfin with a path (e.g. ",(0,a.kt)("inlineCode",{parentName:"p"},"https://example.com/jellyfin"),") is supported by the Android and web clients."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"[!WARNING]","\nBase URL is known to break HDHomeRun, DLNA, Sonarr, Radarr, Chromecast, and MrMC.")),(0,a.kt)("p",null,"The Base URL setting in the ",(0,a.kt)("strong",{parentName:"p"},"Networking")," page is an advanced setting used to specify the URL prefix that your Jellyfin instance can be accessed at. In effect, it adds this URL fragment to the start of any URL path. For instance, if you have a Jellyfin server at ",(0,a.kt)("inlineCode",{parentName:"p"},"http://myserver")," and access its main page ",(0,a.kt)("inlineCode",{parentName:"p"},"http://myserver/web/index.html"),", setting a Base URL of ",(0,a.kt)("inlineCode",{parentName:"p"},"/jellyfin")," will alter this main page to ",(0,a.kt)("inlineCode",{parentName:"p"},"http://myserver/jellyfin/web/index.html"),". This can be useful if administrators want to access multiple Jellyfin instances under a single domain name, or if the Jellyfin instance lives only at a subpath to another domain with other services listening on ",(0,a.kt)("inlineCode",{parentName:"p"},"/"),"."),(0,a.kt)("p",null,"The entered value on the configuration page will be normalized to include a leading ",(0,a.kt)("inlineCode",{parentName:"p"},"/")," if this is missing."),(0,a.kt)("p",null,"This setting requires a server restart to change, in order to avoid invalidating existing paths until the administrator is ready."),(0,a.kt)("p",null,"There are three main caveats to this setting."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"When setting a new Base URL (i.e. from ",(0,a.kt)("inlineCode",{parentName:"p"},"/")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"/baseurl"),") or changing a Base URL (i.e. from ",(0,a.kt)("inlineCode",{parentName:"p"},"/baseurl")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"/newbaseurl"),"), the Jellyfin web server will automatically handle redirects to avoid displaying users invalid pages. For instance, accessing a server with a Base URL of ",(0,a.kt)("inlineCode",{parentName:"p"},"/jellyfin")," on the ",(0,a.kt)("inlineCode",{parentName:"p"},"/")," path will automatically append the ",(0,a.kt)("inlineCode",{parentName:"p"},"/jellyfin")," Base URL. However, entirely removing a Base URL (i.e. from ",(0,a.kt)("inlineCode",{parentName:"p"},"/baseurl")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"/"),", an empty value in the configuration) will not - all URLs with the old Base URL path will become invalid and throw 404 errors. This should be kept in mind when removing an existing Base URL.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Client applications generally, for now, do not handle the Base URL redirects implicitly. Therefore, for instance in the Android app, the ",(0,a.kt)("inlineCode",{parentName:"p"},"Host")," setting ",(0,a.kt)("em",{parentName:"p"},"must")," include the BaseURL as well (e.g. ",(0,a.kt)("inlineCode",{parentName:"p"},"http://myserver:8096/baseurl"),"), or the connection will fail.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Any reverse proxy configurations must be updated to handle a new Base URL. Generally, passing ",(0,a.kt)("inlineCode",{parentName:"p"},"/")," back to the Jellyfin instance will work fine in all cases and the paths will be normalized, and this is the standard configuration in our examples. Keep this in mind however when doing more advanced routing."))),(0,a.kt)("h3",{id:"final-steps"},"Final Steps"),(0,a.kt)("p",null,"It's strongly recommend that you check your SSL strength and server security at ",(0,a.kt)("a",{parentName:"p",href:"https://www.ssllabs.com/ssltest/analyze.html"},"SSLLabs")," if you are exposing these services to the internet."))}d.isMDXComponent=!0}}]);