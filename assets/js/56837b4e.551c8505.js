(self.webpackChunkjellyfin_org=self.webpackChunkjellyfin_org||[]).push([[292],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return h},kt:function(){return f}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),u=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},h=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),c=u(n),f=r,d=c["".concat(l,".").concat(f)]||c[f]||p[f]||a;return n?o.createElement(d,i(i({ref:t},h),{},{components:n})):o.createElement(d,i({ref:t},h))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},6528:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return l},toc:function(){return u},default:function(){return p}});var o=n(2122),r=n(9756),a=(n(7294),n(3905)),i={title:"Plugin Repositories",author:"dkanada",author_url:"https://github.com/dkanada",author_image_url:"https://avatars.githubusercontent.com/u/21353219?v=4",tags:["plugins","server"],description:"Install Plugins from Anywhere!"},s=void 0,l={permalink:"/blog/2020/07/17/plugin-updates",source:"@site/blog/2020-07-17-plugin-updates.md",title:"Plugin Repositories",description:"Install Plugins from Anywhere!",date:"2020-07-17T00:00:00.000Z",formattedDate:"July 17, 2020",tags:[{label:"plugins",permalink:"/blog/tags/plugins"},{label:"server",permalink:"/blog/tags/server"}],readingTime:5.02,truncated:!0,prevItem:{title:"Jellyfin Release - v10.6.0",permalink:"/blog/2020/07/19/jellyfin-10-6-0"},nextItem:{title:"Packaging Updates for 10.6.0",permalink:"/blog/2020/06/21/packaging-updates"}},u=[],h={toc:u};function p(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,o.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"There have been several changes to plugins for the new release.\nHere's a quick post going over the biggest updates for developers and users alike."),(0,a.kt)("p",null,"The most noticable change for everyone is that third party plugin repositories are now available!\nYou can access the current list at Dashboard -> Plugins -> Repositories, and items can be added or removed as desired.\nEven the official repository can be removed if you'd prefer to avoid external calls to our server."),(0,a.kt)("h1",{id:"manifest"},"Manifest"),(0,a.kt)("p",null,"For developers, the only required change is a JSON manifest at ",(0,a.kt)("em",{parentName:"p"},"any")," location with versions that point to binary releases at ",(0,a.kt)("em",{parentName:"p"},"any")," location.\nWe don't require any specific method for hosting these files, as that would go against the ideals of the project.\nThe official repository uses nginx for the manifest and GitHub Releases for the binaries, but you could potentially host the manifest on GitHub as well.\nHere's an example manifest with all the properties.\nPlease note that the GUID must be unique (both in the manifest and the plugin itself) if you want to avoid conflicts with other plugins."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "category": "Metadata",\n        "guid": "a4df60c5-6ab4-412a-8f79-2cab93fb2bc5",\n        "name": "Anime",\n        "description": "This plugin supports several different metadata providers and options for organizing your collection.",\n        "owner": "jellyfin",\n        "overview": "Manage Your Anime in Jellyfin",\n        "versions": [\n            {\n                "checksum": "ad6db5175f4732308b5dd166f79a1c2d",\n                "changelog": "bug fixes and improvements",\n                "targetAbi": "10.6.0.0",\n                "sourceUrl": "https://repo.jellyfin.org/releases/other/whats-this-plugin.zip.gif",\n                "timestamp": "2020-03-27 06:02:58",\n                "version": "1.0.3.0"\n            }\n        ]\n    }\n]\n')),(0,a.kt)("p",null,"The official repository manifest for ",(0,a.kt)("a",{href:"https://repo.jellyfin.org/releases/plugin/manifest-stable.json"},"stable plugins")," can be used for more examples.\nYou can also find the ",(0,a.kt)("a",{href:"https://repo.jellyfin.org/releases/plugin/manifest.json"},"deprecated manifest")," on the same domain for the old format.\nHowever, all new plugin updates (on the official repository) will go to the new manifest, so older verions of Jellyfin won't receive plugin updates.\nPlugins do have ",(0,a.kt)("a",{href:"https://jellyfin.org/docs/plugin-api/MediaBrowser.Model.Updates.html"},"official documentation")," on our DocFX instance.\nPlease be aware that our documentation is still a work in progress, since a lot of the C# code still has very little information for tools like this.\nThings are improving thanks to the diligent server team though, who have been slowly adding information throughout the codebase."),(0,a.kt)("h1",{id:"tools"},"Tools"),(0,a.kt)("p",null,"One excellent tool that might help with repository management is ",(0,a.kt)("a",{href:"https://github.com/oddstr13/jellyfin-plugin-repository-manager"},"jellyfin-plugin-repository-manager")," by Oddstr13, a frequent contributor.\nHe did mention that his tool works much better with nginx than GitHub releases, but feel free to check it out!\nAnother useful tool might be the ",(0,a.kt)("a",{href:"https://github.com/jellyfin/jellyfin-build"},"jellyfin-build")," repository, which used to be the method used for updates on the official repository.\nWe'll probably be migrating to the repository manager linked above though, since most of the other build systems have moved to Azure."),(0,a.kt)("h1",{id:"code"},"Code"),(0,a.kt)("p",null,"There are always a few changes to the ABI you might want to know about if you maintain a plugin.\nI'll include the most important ones for 10.6.0 here to hopefully reduce any issues with the update."),(0,a.kt)("p",null,"The first batch comes from the HTML for settings on the web client, which has been going through an overhaul lately.\nOne of the long term goals we have is deprecating jQuery entirely, since it's not 2008 anymore and better tools have come along.\nThat does mean plugin pages will have to migrate off it at some point, but we haven't made the full transition yet, don't worry.\nAlthough jQuery will stick around a bit longer, we did remove two custom scripts in the web source that...extended the functionality a bit.\nThere was one for ",(0,a.kt)("a",{href:"https://github.com/jellyfin/jellyfin-web/blob/release-10.5.z/src/legacy/selectmenu.js"},"select menus")," and yet another for ",(0,a.kt)("a",{href:"https://github.com/jellyfin/jellyfin-web/blob/release-10.5.z/src/legacy/fnchecked.js"},"checkbox")," elements.\nI can only assume the goal was compatibility with older browsers or clients at the time, but we've been pushing extremely hard to modernize the web client.\nThat means avoiding abandoned libraries, ancient JavaScript practices, and definitely custom extensions for dependencies we don't even want in the code.\nThe easiest fix for this change is to migrate from jQuery to vanilla JavaScript for checkboxes and select menus in the HTML source."),(0,a.kt)("p",null,"There were also several changes to the C# ABI that might affect your plugin.\nThe most troublesome is probably the ILogger tweaks, which were made to improve the server logs by appending the class name to every line.\nYou'll also find quite a few changes caused by the new database migration (Jellyfin.Data is the new namespace for these objects) and a few unrelated items."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"IExternalID.Name -> IExternalID.ProviderName\nMediaBrowser.Controller.Entities.User -> Jellyfin.Data.Entities.User\nMetadataProviders -> MetadataProvider\nCompressionMethod -> CompressionMethods\nRequestContentBytes = request -> RequestContent = Encoding.UTF8.GetString(request)\nUser.Name -> User.Username\nitem.GetDisplayExtras() -> item.GetExtras(BaseItem.DisplayExtraTypes)\nuser.RootFolder -> libraryManager.GetUserRootFolder()\n")),(0,a.kt)("h1",{id:"future"},"Future"),(0,a.kt)("p",null,"Third party repositories are the first step in a larger plan to vastly increase plugin usage within the codebase.\nThey will allow anyone to maintain their own plugin and push updates as quickly as they want, without having to deal with a centralized system.\nIt also gives users the power to reduce their reliance on an internet connection by allowing all repositories to be removed at will."),(0,a.kt)("p",null,"We understand some of these changes might be annoying to update within your plugin, but hopefully that will also see an improvement very soon.\nThe next goal (now that more than one repository can be used at the same time) will be an unstable repository for plugins.\nThis will fix the long-standing request for better plugin support on the unstable version, which has been a blocker for many users.\nIt will also have the side effect of requiring an unstable NuGet repository for the C# ABI, thus helping third party plugin developers test their plugins against any changes to the ABI before a server update has landed."),(0,a.kt)("p",null,"If you develop a plugin (or client) and would like to be included in our mailing list for third party developers, please contact us through Matrix or send an email to get the details.\nThe main goal here is excellent support for plugins and unofficial clients, so if you have any suggestions definitely contact us on one of our public forums.\nHopefully, the C# ABI will stabilize over time and huge changes will become more infrequent so we can focus on making plugins as great as possible!"))}p.isMDXComponent=!0}}]);