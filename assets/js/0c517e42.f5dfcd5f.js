(self.webpackChunkjellyfin_org=self.webpackChunkjellyfin_org||[]).push([[1482],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return m},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=s(n),u=i,f=d["".concat(p,".").concat(u)]||d[u]||c[u]||r;return n?a.createElement(f,o(o({ref:t},m),{},{components:n})):a.createElement(f,o({ref:t},m))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3209:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return l},toc:function(){return p},default:function(){return m}});var a=n(2122),i=n(9756),r=(n(7294),n(3905)),o={id:"mopidy",title:"Mopidy"},l={unversionedId:"clients/mopidy",id:"clients/mopidy",isDocsHomePage:!1,title:"Installing Mopidy Extension",description:"The Mopidy Jellyfin extension is available to install from PyPi using pip.",source:"@site/docs/clients/mopidy.md",sourceDirName:"clients",slug:"/clients/mopidy",permalink:"/docs/clients/mopidy",editUrl:"https://github.com/jellyfin/jellyfin.org/edit/master/docs/clients/mopidy.md",version:"current",frontMatter:{id:"mopidy",title:"Mopidy"},sidebar:"tutorialSidebar",previous:{title:"Kodi",permalink:"/docs/clients/kodi"},next:{title:"Jellyfin Web Configuration",permalink:"/docs/clients/clients-web-config"}},p=[{value:"General",id:"general",children:[]},{value:"Raspberry Pi (Remote Controlled Speakers)",id:"raspberry-pi-remote-controlled-speakers",children:[]},{value:"Config File",id:"config-file",children:[]},{value:"Usage",id:"usage",children:[]},{value:"Upgrading",id:"upgrading",children:[]}],s={toc:p};function m(e){var t=e.components,n=(0,i.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The Mopidy Jellyfin extension is available to install from ",(0,r.kt)("a",{parentName:"p",href:"https://pypi.org/project/Mopidy-Jellyfin"},"PyPi")," using pip."),(0,r.kt)("h2",{id:"general"},"General"),(0,r.kt)("p",null,"For general use computers, such as workstations or laptops, it's recommended to install Mopidy extensions in user mode.  Installing python packages from pip using sudo or root permissions can lead to conflicts with your package manager in the future."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install Mopidy using your method of choice using the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.mopidy.com/en/latest/installation/"},"official documentation"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install the Jellyfin extension for Mopidy:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip3 install --user mopidy-jellyfin\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"(Optional) Install other mopidy related packages:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip3 install --user mopidy-mpd mopidy-musicbox-webclient\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Configure your ",(0,r.kt)("inlineCode",{parentName:"p"},"mopidy.conf")," located at ",(0,r.kt)("inlineCode",{parentName:"p"},"$HOME/.config/mopidy/mopidy.conf"),"\nSee ",(0,r.kt)("a",{parentName:"p",href:"xref:clients-mopidy#config-file"},"Config File"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"There may be a need to install extra ",(0,r.kt)("inlineCode",{parentName:"p"},"gstreamer")," codecs if they're not already on your system, but these are highly variable and depend on your hardware and distro")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Start the program by running ",(0,r.kt)("inlineCode",{parentName:"p"},"mopidy")," from a terminal")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"See ",(0,r.kt)("a",{parentName:"p",href:"xref:clients-mopidy#usage"},"Usage")))),(0,r.kt)("h2",{id:"raspberry-pi-remote-controlled-speakers"},"Raspberry Pi (Remote Controlled Speakers)"),(0,r.kt)("p",null,"Utilizing a Raspberry Pi (or other small form factor computer) it's possible to use Mopidy to build a set of standalone smart speakers connected to your Jellyfin server."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Grab the latest ",(0,r.kt)("a",{parentName:"p",href:"https://www.raspberrypi.org/downloads/raspbian/"},"raspbian image"),".  Unless you have a need for a GUI, the 'Lite' image is plenty for this project.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install the image to the SD card (See the ",(0,r.kt)("a",{parentName:"p",href:"https://www.raspberrypi.org/documentation/installation/installing-images/README.md"},"official documentation"),")")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install Mopidy from their ",(0,r.kt)("a",{parentName:"p",href:"https://docs.mopidy.com/en/latest/installation/debian/#install-from-apt-mopidy-com"},"apt repo")," to ensure we get the latest version")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install required OS packages:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"sudo apt install mopidy mopidy-mpd gstreamer1.0-plugins-bad python3-pip\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install the Jellyfin extension and any other Mopidy related packages you may want:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"sudo pip3 install mopidy-jellyfin mopidy-musicbox-webclient\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Configure your ",(0,r.kt)("inlineCode",{parentName:"p"},"mopidy.conf")," located at ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/mopidy/mopidy.conf"),":\nSee ",(0,r.kt)("a",{parentName:"p",href:"xref:clients-mopidy#config-file"},"Config File"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Enable and start the mopidy service:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl enable --now mopidy\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"See ",(0,r.kt)("a",{parentName:"p",href:"xref:clients-mopidy#usage"},"Usage")))),(0,r.kt)("h2",{id:"config-file"},"Config File"),(0,r.kt)("p",null,"The config file for Mopidy is divided into sections in an INI format. An example for Jellyfin is shown here."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},'[jellyfin]\nhostname = Jellyfin server hostname\nusername = username\npassword = password\nlibraries = Library1, Library2 (Optional: will default to "Music" if left undefined)\nalbumartistsort = False (Optional: will default to True if left undefined)\nalbum_format = {ProductionYear} - {Name} (Optional: will default to "{Name}" if left undefined)\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"libraries")," determines what is populated into Mopidy's internal library (view by Artists/Album/etc).  Using the file browser will show all music or book libraries in the Jellyfin server"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"albumartistsort"),' changes whether the media library populates based on "Artist" or "Album Artist" metadata'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"album_format")," can be used to change the display format of music albums when using the file browser view.  Currently the only really usable fields are ProductionYear and Name")),(0,r.kt)("p",null,"Other options that may be useful to include:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[mpd]\nenabled = true\n# Useful if you want to control this instance from a remote MPD client\nhostname = 0.0.0.0\nport = 6600\n# This will help avoid timeout errors for  artists or folders with large amounts of files\nconnection_timeout = 300\n\n# Used in the event you want to control this system from a web browser\n[http]\nhostname = 0.0.0.0\nport = 6680\n")),(0,r.kt)("p",null,"Be aware that Mopidy provides no security on open ports, so if you'll be running this in a public place you'll likely want to change ",(0,r.kt)("inlineCode",{parentName:"p"},"0.0.0.0")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"127.0.0.1")," to prevent somebody else from hijacking your listening session."),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"Once Mopidy is running, you can connect and control it with your client of choice.  MPD clients will connect using port 6600 by default.  Tested MPD clients include ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/arybczak/ncmpcpp"},"ncmpcpp")," and ",(0,r.kt)("a",{parentName:"p",href:"https://play.google.com/store/apps/details?id=org.gateshipone.malp"},"M.A.L.P"),".  Web clients can be reached at ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:6680"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"http://$IP_ADDRESS:6680")," if this is a remote system."),(0,r.kt)("h2",{id:"upgrading"},"Upgrading"),(0,r.kt)("p",null,"When a new version of Mopidy Jellyfin is released, you can upgrade via pip using the ",(0,r.kt)("inlineCode",{parentName:"p"},"--upgrade")," flag."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pip3 install --user --upgrade mopidy-jellyfin\n")))}m.isMDXComponent=!0}}]);