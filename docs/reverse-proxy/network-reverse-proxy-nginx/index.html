<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Jellyfin Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Jellyfin Blog Atom Feed"><title data-react-helmet="true">Nginx | Jellyfin</title><meta data-react-helmet="true" property="og:url" content="http://next.jellyfin.org/docs/reverse-proxy/network-reverse-proxy-nginx"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="og:type" content="website"><meta data-react-helmet="true" name="twitter:site" content="@jellyfin"><meta data-react-helmet="true" property="og:title" content="Nginx | Jellyfin"><meta data-react-helmet="true" name="description" content="Nginx"><meta data-react-helmet="true" property="og:description" content="Nginx"><meta data-react-helmet="true" property="og:image" content="http://next.jellyfin.org/img/social.png"><meta data-react-helmet="true" name="twitter:image" content="http://next.jellyfin.org/img/social.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://next.jellyfin.org/docs/reverse-proxy/network-reverse-proxy-nginx"><link data-react-helmet="true" rel="alternate" href="http://next.jellyfin.org/docs/reverse-proxy/network-reverse-proxy-nginx" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://next.jellyfin.org/docs/reverse-proxy/network-reverse-proxy-nginx" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7ff4a8cc.css">
<link rel="preload" href="/assets/js/runtime~main.143f2ea0.js" as="script">
<link rel="preload" href="/assets/js/main.11cab31a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Jellyfin logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Jellyfin logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/features">Features</a><a class="navbar__item navbar__link" href="/clients">Clients</a><a class="navbar__item navbar__link" href="/plugins">Plugins</a><a class="navbar__item navbar__link" href="/downloads">Downloads</a><a class="navbar__item navbar__link" href="/contribute">Contribute</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started">Documentation</a><a class="navbar__item navbar__link" href="/contact">Contact</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Jellyfin logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Jellyfin logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/features">Features</a></li><li class="menu__list-item"><a class="menu__link" href="/clients">Clients</a></li><li class="menu__list-item"><a class="menu__link" href="/plugins">Plugins</a></li><li class="menu__list-item"><a class="menu__link" href="/downloads">Downloads</a></li><li class="menu__list-item"><a class="menu__link" href="/contribute">Contribute</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/getting-started">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/contact">Contact</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installing-jellyfin">Installing the server</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/admin-building">Building from source</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/setup-live-tv">Setting up live TV</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Client configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/kodi">Kodi</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/mopidy">Installing Mopidy Extension</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/clients-web-config">Jellyfin Web Configuration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Server configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/general-configuration">General information</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/admin-hardware-acceleration">Hardware Acceleration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/networking">Networking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/admin-troubleshoot">Troubleshooting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Organizing your media</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/media/server-media-books">Books</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/media/server-media-internet-radio">Internet radio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/media/server-media-movies">Movies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/media/server-media-music">Music</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/media/server-media-shows">Shows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/media/server-media-subtitles">Subtitles</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugins/server-plugins-index">Installing plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugins/server-plugins-open-subtitles">Open Subtitles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugins/server-plugins-tvheadend">TVHeadend</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Using with a reverse proxy</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reverse-proxy/network-reverse-proxy-apache">Apache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reverse-proxy/network-reverse-proxy-caddy">Caddy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reverse-proxy/network-reverse-proxy-haproxy">HAProxy</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/reverse-proxy/network-reverse-proxy-nginx">Nginx</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reverse-proxy/network-reverse-proxy-traefik">Traefik v1.x</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reverse-proxy/network-reverse-proxy-traefik2">Traefik v2.x</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Server administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/server-devices">Devices</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/network-dlna">DLNA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/server-libraries">Libraries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/live-tv">Live TV</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/server-notifications">Notifications</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/server-quick-connect">Quick Connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/server-settings">Settings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/server-storage">Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/server-tasks">Tasks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/server-transcoding">Transcoding</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Users</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/users/server-users-managing">Managing Users</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server/users/server-users-index">Users</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tips &amp; tricks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tips-and-tricks/clients-css-customization">CSS Customization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tips-and-tricks/fail2ban-jellyfin">fail2ban</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tips-and-tricks/network-letsencrypt">Let&#x27;s Encrypt</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tips-and-tricks/migrations">Migrations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tips-and-tricks/monitoring">Monitoring</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Nginx</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nginx"></a>Nginx<a class="hash-link" href="#nginx" title="Direct link to heading">#</a></h2><p>&quot;<a href="https://www.nginx.com/" target="_blank" rel="noopener noreferrer">Nginx</a> (pronounced &quot;engine X&quot;) is a web server which can also be used as a reverse proxy, load balancer, mail proxy and HTTP cache. The software was created by Igor Sysoev and first publicly released in 2004.[9] A company of the same name was founded in 2011 to provide support and Nginx plus paid software.&quot; - <a href="https://en.wikipedia.org/wiki/Nginx" target="_blank" rel="noopener noreferrer">Wikipedia</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nginx-from-a-subdomain-jellyfinexampleorg"></a>Nginx from a subdomain (jellyfin.example.org)<a class="hash-link" href="#nginx-from-a-subdomain-jellyfinexampleorg" title="Direct link to heading">#</a></h2><blockquote><p>[!WARNING]
HTTP is insecure. The following configuration is provided for ease of use only. If you are planning on exposing your server over the Internet you should setup HTTPS. <a href="https://letsencrypt.org/getting-started/" target="_blank" rel="noopener noreferrer">Let&#x27;s Encrypt</a> can provide free TLS certificates which can be installed easily via <a href="https://certbot.eff.org/" target="_blank" rel="noopener noreferrer">certbot</a>. Using only HTTP will expose passwords and API keys.</p></blockquote><p>Create the file <code>/etc/nginx/conf.d/jellyfin.conf</code> which will forward requests to Jellyfin.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly config"><div tabindex="0" class="prism-code language-config codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Uncomment the commented sections after you have acquired a SSL Certificate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">server {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    listen 80;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    listen [::]:80;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # server_name DOMAIN_NAME;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # Uncomment to redirect HTTP to HTTPS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # return 301 https://$host$request_uri;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#server {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # listen 443 ssl http2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # listen [::]:443 ssl http2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    server_name DOMAIN_NAME;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # use a variable to store the upstream proxy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # in this example we are using a hostname which is resolved via DNS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # (if you aren&#x27;t using DNS remove the resolver line and change the variable to point to an IP address e.g `set $jellyfin 127.0.0.1`)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    set $jellyfin jellyfin;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    resolver 127.0.0.1 valid=30;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #ssl_certificate /etc/letsencrypt/live/DOMAIN_NAME/fullchain.pem;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #ssl_certificate_key /etc/letsencrypt/live/DOMAIN_NAME/privkey.pem;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #include /etc/letsencrypt/options-ssl-nginx.conf;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #add_header Strict-Transport-Security &quot;max-age=31536000&quot; always;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #ssl_trusted_certificate /etc/letsencrypt/live/DOMAIN_NAME/chain.pem;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #ssl_stapling on;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #ssl_stapling_verify on;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # Security / XSS Mitigation Headers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    add_header X-Frame-Options &quot;SAMEORIGIN&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    add_header X-XSS-Protection &quot;1; mode=block&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    add_header X-Content-Type-Options &quot;nosniff&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # Content Security Policy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # See: https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # Enforces https content and restricts JS/CSS to origin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # External Javascript (such as cast_sender.js for Chromecast) must be whitelisted.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #add_header Content-Security-Policy &quot;default-src https: data: blob: http://image.tmdb.org; style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; https://www.gstatic.com/cv/js/sender/v1/cast_sender.js https://www.youtube.com blob:; worker-src &#x27;self&#x27; blob:; connect-src &#x27;self&#x27;; object-src &#x27;none&#x27;; frame-ancestors &#x27;self&#x27;&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    location = / {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return 302 https://$host/web/;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    location / {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        # Proxy main Jellyfin traffic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_pass http://$jellyfin:8096;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header Host $host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Proto $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Protocol $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Host $http_host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        # Disable buffering when the nginx proxy gets very resource heavy upon streaming</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_buffering off;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # location block for /web - This is purely for aesthetics so /web/#!/ works instead of having to go to /web/index.html/#!/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    location = /web/ {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        # Proxy main Jellyfin traffic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_pass http://$jellyfin:8096/web/index.html;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header Host $host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Proto $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Protocol $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Host $http_host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    location /socket {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        # Proxy Jellyfin Websockets traffic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_pass http://$jellyfin:8096;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_http_version 1.1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header Upgrade $http_upgrade;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header Connection &quot;upgrade&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header Host $host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Proto $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Protocol $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Host $http_host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nginx-with-subpath-exampleorgjellyfin"></a>Nginx with Subpath (example.org/jellyfin)<a class="hash-link" href="#nginx-with-subpath-exampleorgjellyfin" title="Direct link to heading">#</a></h2><p>When connecting to server from a client application, enter <code>http(s)://DOMAIN_NAME/jellyfin</code> in the address field.</p><p>Set the <a href="xref:network-index#base-url" target="_blank" rel="noopener noreferrer">base URL</a> field in the Jellyfin server.  This can be done by navigating to the Admin Dashboard -&gt; Networking -&gt; Base URL in the web client.  Fill in this box with <code>/jellyfin</code> and click Save.  The server will need to be restarted before this change takes effect.</p><blockquote><p>[!WARNING]
HTTP is insecure. The following configuration is provided for ease of use only. If you are planning on exposing your server over the Internet you should setup HTTPS. <a href="https://letsencrypt.org/getting-started/" target="_blank" rel="noopener noreferrer">Let&#x27;s Encrypt</a> can provide free TLS certificates which can be installed easily via <a href="https://certbot.eff.org/" target="_blank" rel="noopener noreferrer">certbot</a>.</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly conf"><div tabindex="0" class="prism-code language-conf codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Jellyfin hosted on http(s)://DOMAIN_NAME/jellyfin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">server {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    listen 80;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    listen [::]:80;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    server_name DOMAIN_NAME;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # You can specify multiple domain names if you want</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #server_name jellyfin.local;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # use a variable to store the upstream proxy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # in this example we are using a hostname which is resolved via DNS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # (if you aren&#x27;t using DNS remove the resolver line and change the variable to point to an IP address e.g `set $jellyfin 127.0.0.1`)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    set $jellyfin jellyfin;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    resolver 127.0.0.1 valid=30;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # Uncomment and create directory to also host static content</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #root /srv/http/media;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    index index.html;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    location / {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        try_files $uri $uri/ =404;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # Jellyfin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    location /jellyfin {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return 302 $scheme://$host/jellyfin/;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    location /jellyfin/ {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        # Proxy main Jellyfin traffic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        # The / at the end is significant.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        # https://www.acunetix.com/blog/articles/a-fresh-look-on-reverse-proxy-related-attacks/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_pass http://$jellyfin:8096/jellyfin/;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_pass_request_headers on;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header Host $host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Proto $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header X-Forwarded-Host $http_host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header Upgrade $http_upgrade;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_set_header Connection $http_connection;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        # Disable buffering when the nginx proxy gets very resource heavy upon streaming</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        proxy_buffering off;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extra-nginx-configurations"></a>Extra Nginx Configurations<a class="hash-link" href="#extra-nginx-configurations" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cache-video-streams"></a>Cache Video Streams<a class="hash-link" href="#cache-video-streams" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly conf"><div tabindex="0" class="prism-code language-conf codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#Must be in HTTP block</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">proxy_cache_path  /home/cache/web levels=1:2 keys_zone=cWEB:50m inactive=90d max_size=35000m;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">map $request_uri $h264Level { ~(h264-level=)(.+?)&amp; $2; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">map $request_uri $h264Profile { ~(h264-profile=)(.+?)&amp; $2; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#set in Server block</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">proxy_cache cWEB;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">proxy_cache_valid 200 301 302 30d;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">proxy_ignore_headers Expires Cache-Control Set-Cookie X-Accel-Expires;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">proxy_connect_timeout 10s;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">proxy_http_version 1.1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">proxy_set_header Connection &quot;&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">location /videos/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_pass http://myJF-IP:8096;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_cache_key &quot;mydomain.com$uri?MediaSourceId=$arg_MediaSourceId&amp;VideoCodec=$arg_VideoCodec&amp;AudioCodec=$arg_AudioCodec&amp;AudioStreamIndex=$arg_AudioStreamIndex&amp;VideoBitrate=$arg_VideoBitrate&amp;AudioBitrate=$arg_AudioBitrate&amp;SubtitleMethod=$arg_SubtitleMethod&amp;TranscodingMaxAudioChannels=$arg_TranscodingMaxAudioChannels&amp;RequireAvc=$arg_RequireAvc&amp;SegmentContainer=$arg_SegmentContainer&amp;MinSegments=$arg_MinSegments&amp;BreakOnNonKeyFrames=$arg_BreakOnNonKeyFrames&amp;h264-profile=$h264Profile&amp;h264-level=$h264Level&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_cache_valid 200 301 302 30d;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cache-images"></a>Cache Images<a class="hash-link" href="#cache-images" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly conf"><div tabindex="0" class="prism-code language-conf codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Add this outside of you server block (i.e. http block)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">proxy_cache_path /var/cache/nginx/jellyfin levels=1:2 keys_zone=jellyfin:100m max_size=15g inactive=30d use_temp_path=off;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Cache images (inside server block)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">location ~ /Items/(.*)/Images {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_pass http://127.0.0.1:8096;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_set_header Host $host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_set_header X-Real-IP $remote_addr;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_set_header X-Forwarded-Proto $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_set_header X-Forwarded-Protocol $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_set_header X-Forwarded-Host $http_host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_cache jellyfin;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_cache_revalidate on;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  proxy_cache_lock on;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # add_header X-Cache-Status $upstream_cache_status; # This is only to check if cache is working</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Ensure that the directory /var/cache/nginx/jellyfin exists and the nginx user has write permissions on it! All the cache options used are explained on <a href="https://www.nginx.com/blog/nginx-caching-guide/" target="_blank" rel="noopener noreferrer">Nginx blog</a> and <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html" target="_blank" rel="noopener noreferrer">Nginx proxy module</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rate-limit-downloads"></a>Rate Limit Downloads<a class="hash-link" href="#rate-limit-downloads" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly conf"><div tabindex="0" class="prism-code language-conf codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Add this outside of you server block (i.e. http block)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">limit_conn_zone $binary_remote_addr zone=addr:10m;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Downloads limit (inside server block)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">location ~ /Items/(.*)/Download$ {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   proxy_pass http://127.0.0.1:8096;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   proxy_set_header Host $host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   proxy_set_header X-Real-IP $remote_addr;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   proxy_set_header X-Forwarded-Proto $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   proxy_set_header X-Forwarded-Protocol $scheme;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   proxy_set_header X-Forwarded-Host $http_host;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   limit_rate 1700k; # Speed limit (here is on kb/s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   limit_conn addr 3; # Number of simultaneous downloads per IP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   limit_conn_status 460; # Custom error handling</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   # proxy_buffering on; # Be sure buffering is on (it is by default on nginx), otherwise limits won&#x27;t work</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Error page</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">error_page 460 http://your-page-telling-your-limit/;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><a href="https://www.nginx.com/blog/rate-limiting-nginx/" target="_blank" rel="noopener noreferrer">See here for more</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/jellyfin/jellyfin.org/edit/master/docs/reverse-proxy/nginx.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/reverse-proxy/network-reverse-proxy-haproxy"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« HAProxy</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/reverse-proxy/network-reverse-proxy-traefik"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Traefik v1.x »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#nginx" class="table-of-contents__link">Nginx</a></li><li><a href="#nginx-from-a-subdomain-jellyfinexampleorg" class="table-of-contents__link">Nginx from a subdomain (jellyfin.example.org)</a></li><li><a href="#nginx-with-subpath-exampleorgjellyfin" class="table-of-contents__link">Nginx with Subpath (example.org/jellyfin)</a></li><li><a href="#extra-nginx-configurations" class="table-of-contents__link">Extra Nginx Configurations</a><ul><li><a href="#cache-video-streams" class="table-of-contents__link">Cache Video Streams</a></li><li><a href="#cache-images" class="table-of-contents__link">Cache Images</a></li><li><a href="#rate-limit-downloads" class="table-of-contents__link">Rate Limit Downloads</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a href="https://developer.jellyfin.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Documentation</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community-standards">Community Standards</a></li><li class="footer__item"><a href="https://matrix.to/#/+jellyfin:matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix</a></li><li class="footer__item"><a href="https://discord.gg/zHBxVSXdBV" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://reddit.com/r/jellyfin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/getting-help">Getting Help</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">FAQ</a></li><li class="footer__item"><a href="https://github.com/jellyfin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Check us out on GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Site content is licensed <a href="http://creativecommons.org/licenses/by-nd/4.0/">CC-BY-ND-4.0</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.143f2ea0.js"></script>
<script src="/assets/js/main.11cab31a.js"></script>
</body>
</html>